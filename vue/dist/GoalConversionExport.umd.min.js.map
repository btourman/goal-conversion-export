{"version":3,"sources":["webpack://GoalConversionExport/webpack/universalModuleDefinition","webpack://GoalConversionExport/webpack/bootstrap","webpack://GoalConversionExport/external \"CoreHome\"","webpack://GoalConversionExport/external {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://GoalConversionExport/external \"CorePluginsAdmin\"","webpack://GoalConversionExport/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionEdit.vue","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/api.ts","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionEdit.vue?9e1a","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionEdit.vue?9cc7","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionEdit.adapter.ts","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionList.vue","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionList.vue?422c","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionList.vue?31df","webpack://GoalConversionExport/./plugins/GoalConversionExport/vue/src/GoalConversionExportComponent/GoalConversionList.adapter.ts"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__19dc__","__WEBPACK_EXTERNAL_MODULE__8bbf__","__WEBPACK_EXTERNAL_MODULE_a5a2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","currentScript","document","src","match","class","style","model-value","conversionExport","inline-help","title","uicontrol","$event","export_type","options","exportTypeOptions","description","access_token","disabled","placeholder","day_to_export","parameters","pixel_id","meta_access_token","goals","ui-control-attributes","full-width","tabindex","save","fetch","method","idSite","filter_limit","then","values","reduce","acc","g","idgoal","goalConversions","map","goalConversion","JSON","parse","idExport","id_export","post","withTokenInUrl","response","type","catch","e","message","REVENUE_OPTIONS","goal","null","EXPORT_TYPE_OPTIONS","google","facebook","components","ContentBlock","Field","SaveButton","data","id_goal","export_name","revenu","mounted","URLSearchParams","location","search","has","methods","constructBodySave","body","exportType","trim","filter","dayToExport","href","origin","pathname","computed","revenueOptions","render","component","GoalConversionEdit","scope","exportTypes","angularJsBind","alreadyCreatedExportTypes","clickIdProviders","hasWriteAccess","directiveName","id","ref","role","site","$sanitize","displayGoal","ts_requested","openExport","generateExportUrl","editGoalConversion","deleteConversion","exportLink","onclick","readonly","custom","currentSiteName","Promise","all","sort","lhs","rhs","parseInt","content","push","revenuName","join","accessToken","open","getExportUrl","params","stringify","action","helper","modalConfirm","$refs","showExportLink","confirmDeleteExport","yes","siteId","GoalConversionList"],"mappings":"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","file":"GoalConversionExport.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"CoreHome\"), require(\"vue\"), require(\"CorePluginsAdmin\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"CoreHome\", , \"CorePluginsAdmin\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GoalConversionExport\"] = factory(require(\"CoreHome\"), require(\"vue\"), require(\"CorePluginsAdmin\"));\n\telse\n\t\troot[\"GoalConversionExport\"] = factory(root[\"CoreHome\"], root[\"Vue\"], root[\"CorePluginsAdmin\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__19dc__, __WEBPACK_EXTERNAL_MODULE__8bbf__, __WEBPACK_EXTERNAL_MODULE_a5a2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"plugins/GoalConversionExport/vue/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fae3\");\n","module.exports = __WEBPACK_EXTERNAL_MODULE__19dc__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;","module.exports = __WEBPACK_EXTERNAL_MODULE_a5a2__;","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","<!--\n  Matomo - free/libre analytics platform\n\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <ContentBlock\n  >\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <Field\n          :model-value=\"conversionExport.name\"\n          inline-help=\"Provide a concise label to distinguish this export conversion in the list\n          of exports.\"\n          name=\"name\"\n          title=\"Name of export\"\n          uicontrol=\"text\"\n          @update:model-value=\"conversionExport.name = $event\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <Field\n          :model-value=\"conversionExport.export_type\"\n          :options=\"exportTypeOptions\"\n          inline-help=\"Select the Export category. Depending on your choice, the export format\n          may vary. You have the option to choose from these categories:\"\n          name=\"type\"\n          title=\"Export type\"\n          uicontrol=\"radio\"\n          @update:model-value=\"conversionExport.export_type = $event\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <Field\n          :model-value=\"conversionExport.description\"\n          inline-help=\"Providing a description could be useful for providing additional details\n          about the export conversion and its intended purpose.\"\n          name=\"description\"\n          title=\"Description (Optional)\"\n          uicontrol=\"text\"\n          @update:model-value=\"conversionExport.description = $event\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <Field\n          :model-value=\"conversionExport.access_token\"\n          disabled\n          inline-help=\"The access token generated within the export URL provides unique access to\n          export conversions to third-party external services and tools.\"\n          name=\"access_token\"\n          placeholder=\"Access token will be automatically generated after the export is created.\"\n          title=\"Access Token\"\n          uicontrol=\"text\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <Field\n          :model-value=\"conversionExport.day_to_export\"\n          inline-help=\"You can specify the count of days to be incorporated into the export,\n          with today always being excluded.\"\n          name=\"day_to_export\"\n          title=\"Days to export\"\n          uicontrol=\"number\"\n          @update:model-value=\"conversionExport.day_to_export = $event\"\n        />\n      </div>\n    </div>\n    <div v-if=\"conversionExport.export_type == 'facebook'\" class=\"row\">\n      <div class=\"col s12\">\n        <Field\n          :model-value=\"conversionExport.parameters.pixel_id\"\n          inline-help=\"Here you must define the meta pixel ID\"\n          name=\"pixel_id\"\n          title=\"Pixel ID\"\n          uicontrol=\"text\"\n          @update:model-value=\"conversionExport.parameters.pixel_id = $event\"\n        />\n      </div>\n    </div>\n    <div v-if=\"conversionExport.export_type == 'facebook'\" class=\"row\">\n      <div class=\"col s12\">\n        <Field\n          :model-value=\"conversionExport.parameters.meta_access_token\"\n          inline-help=\"Here you must define the Meta Access Token to send to Conversion API\"\n          name=\"meta_access_token\"\n          title=\"Meta Access Token\"\n          uicontrol=\"text\"\n          @update:model-value=\"conversionExport.parameters.meta_access_token = $event\"\n        />\n      </div>\n    </div>\n    <div class=\"row\" style=\"margin-bottom:0\">\n      <div\n        :class=\"`col s12`\"\n      >\n        <h3>Conversions To Export</h3>\n        <p>In this section, you can specify the objectives to be included in the exported\n          conversions. For each objective, you have the option to designate an alternative name\n          for use in the export. This alternative name is employed to link Matomo objectives to\n          the conversions configured in an external system, such as Google Ads. You can also assign\n          the same alternative name to multiple objectives to consolidate them into a single\n          conversion alias. <br/>Furthermore, you have the flexibility to set the revenue to be\n          utilized for the export.</p>\n        <Field\n          :model-value='conversionExport.goals'\n          :ui-control-attributes='{\n          \"field1\":{\n            \"key\":\"id_goal\",\n            \"title\":\"Goal\",\n            \"uiControl\":\"select\",\n          availableValues:this.goals\n          },\n          \"field2\":{\n            \"key\":\"export_name\",\n            \"title\":\"Alias name in export\",\n            \"uiControl\":\"text\"\n            },\n          \"field3\":{\n            \"key\":\"revenu\",\n            \"title\":\"Revenue\",\n            \"uiControl\":\"select\",\n          availableValues: this.revenueOptions\n          }\n        }'\n          full-width=\"true\"\n          name=\"trigger_type\"\n          uicontrol=\"multituple\"\n\n          @update:model-value=\"conversionExport.goals = $event\"\n        />\n      </div>\n    </div>\n    <SaveButton\n      class=\"createButton\"\n      tabindex=\"100\"\n      @confirm=\"save()\"\n    >\n    </SaveButton>\n  </ContentBlock>\n</template>\n\n<style lang=\"less\" scoped>\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { Field, SaveButton } from 'CorePluginsAdmin';\nimport { AjaxHelper, ContentBlock, Matomo } from 'CoreHome';\nimport {\n  GoalConversion, GoalFromGoalConversion, KeyValue, SaveGoalConversion,\n} from '../types';\nimport { fetchGoalConversion, fetchGoals } from '../api';\n\ninterface TestPluginComponentState {\n  conversionExport: GoalConversion;\n  goals: KeyValue;\n}\n\nconst REVENUE_OPTIONS = {\n  goal: 'Include revenue information in the export (if any available)',\n  null: 'Do not set revenue (revenue won\\'t be exported)',\n};\n\nconst EXPORT_TYPE_OPTIONS = {\n  google: 'Google',\n  facebook: 'Facebook',\n};\n\nexport default defineComponent({\n  components: {\n    ContentBlock,\n    Field,\n    SaveButton,\n  },\n  data(): TestPluginComponentState {\n    return {\n      goals: {},\n      conversionExport: {\n        export_type: 'google',\n        day_to_export: 7,\n        goals: [{ id_goal: '', export_name: '', revenu: '' }],\n        parameters: { pixel_id: '', meta_access_token: '' },\n      } as unknown as GoalConversion,\n    };\n  },\n  mounted() {\n    fetchGoals()\n      .then((goals) => {\n        this.goals = goals;\n      });\n\n    const parameters = new URLSearchParams(window.location.search);\n    if (parameters.has('idExport')) {\n      fetchGoalConversion(parameters.get('idExport'))\n        .then((conversionExport) => {\n          this.conversionExport = conversionExport;\n        });\n    }\n  },\n  methods: {\n    constructBodySave() {\n      const body: SaveGoalConversion = {\n        name: this.conversionExport.name,\n        exportType: this.conversionExport.export_type,\n        description: this.conversionExport.description ? this.conversionExport.description.trim() : '',\n        method: 'GoalConversionExport.addGoalConversion',\n        goals: this.conversionExport.goals\n          .filter((g: GoalFromGoalConversion) => !!g.id_goal && !!g.revenu),\n        dayToExport: this.conversionExport.day_to_export,\n        idExport: null,\n        parameters: {},\n      };\n      if (this.conversionExport.id_export) {\n        body.idExport = this.conversionExport.id_export;\n        body.method = 'GoalConversionExport.updateGoalConversion';\n      }\n      if (this.conversionExport.export_type === 'facebook') {\n        body.parameters = this.conversionExport.parameters;\n      }\n      return body;\n    },\n    save() {\n      return AjaxHelper.post(\n        {},\n        this.constructBodySave(),\n        {\n          withTokenInUrl: true,\n        },\n      ).then(() => {\n        window.location.href = `${window.location.origin}${window.location.pathname}?module=GoalConversionExport&action=index&idSite=${Matomo.idSite}`;\n      }).catch((e) => ({\n        type: 'error',\n        message: e.message || e,\n      }));\n    },\n  },\n  computed: {\n    exportTypeOptions() {\n      return EXPORT_TYPE_OPTIONS;\n    },\n    revenueOptions() {\n      return REVENUE_OPTIONS;\n    },\n  },\n});\n</script>\n","import { AjaxHelper, Matomo } from 'CoreHome';\nimport { GoalConversion, KeyValue } from './types';\n\nexport const fetchGoals = (): Promise<KeyValue> => AjaxHelper.fetch<Record<string | number,\n  { idgoal: number, name: string }>>({\n    module: 'API',\n    method: 'Goals.getGoals',\n    idSite: Matomo.idSite,\n    filter_limit: '-1',\n  }).then((goals) => Object.values(goals).reduce((acc, g) => {\n    acc[g.idgoal] = g.name;\n    return acc;\n  }, {} as KeyValue));\n\nexport const fetchGoalConversions = (): Promise<GoalConversion[]> => AjaxHelper\n  .fetch<GoalConversion[]>({\n    module: 'API',\n    method: 'GoalConversionExport.getGoalConversions',\n    idSite: Matomo.idSite,\n    filter_limit: '-1',\n  }).then((goalConversions) => goalConversions.map((goalConversion) => {\n    if (typeof goalConversion.goals === 'string') {\n      goalConversion.goals = JSON.parse(goalConversion.goals);\n    }\n    return goalConversion;\n  }));\n\nexport const fetchGoalConversion = (idExport: string | null): Promise<GoalConversion> => AjaxHelper\n  .fetch<GoalConversion>({\n    module: 'API',\n    method: 'GoalConversionExport.getGoalConversion',\n    idSite: Matomo.idSite,\n    idExport,\n    filter_limit: '-1',\n  }).then((goalConversion) => {\n    if (typeof goalConversion.goals === 'string') {\n      goalConversion.goals = JSON.parse(goalConversion.goals);\n    }\n    if (typeof goalConversion.parameters === 'string' && goalConversion.parameters !== 'null') {\n      goalConversion.parameters = JSON.parse(goalConversion.parameters);\n    } else {\n      goalConversion.parameters = {};\n    }\n    return goalConversion;\n  });\n\nexport const deleteConversion = (id_export: number) => AjaxHelper.post(\n  {},\n  {\n    idExport: id_export,\n    idSite: Matomo.idSite,\n    method: 'GoalConversionExport.deleteGoalConversion',\n  },\n  {\n    withTokenInUrl: true,\n  },\n).then((response) => ({\n  type: 'success',\n  response,\n})).catch((e) => ({\n  type: 'error',\n  message: e.message || e,\n}));\n","\nimport { defineComponent } from 'vue';\nimport { Field, SaveButton } from 'CorePluginsAdmin';\nimport { AjaxHelper, ContentBlock, Matomo } from 'CoreHome';\nimport {\n  GoalConversion, GoalFromGoalConversion, KeyValue, SaveGoalConversion,\n} from '../types';\nimport { fetchGoalConversion, fetchGoals } from '../api';\n\ninterface TestPluginComponentState {\n  conversionExport: GoalConversion;\n  goals: KeyValue;\n}\n\nconst REVENUE_OPTIONS = {\n  goal: 'Include revenue information in the export (if any available)',\n  null: 'Do not set revenue (revenue won\\'t be exported)',\n};\n\nconst EXPORT_TYPE_OPTIONS = {\n  google: 'Google',\n  facebook: 'Facebook',\n};\n\nexport default defineComponent({\n  components: {\n    ContentBlock,\n    Field,\n    SaveButton,\n  },\n  data(): TestPluginComponentState {\n    return {\n      goals: {},\n      conversionExport: {\n        export_type: 'google',\n        day_to_export: 7,\n        goals: [{ id_goal: '', export_name: '', revenu: '' }],\n        parameters: { pixel_id: '', meta_access_token: '' },\n      } as unknown as GoalConversion,\n    };\n  },\n  mounted() {\n    fetchGoals()\n      .then((goals) => {\n        this.goals = goals;\n      });\n\n    const parameters = new URLSearchParams(window.location.search);\n    if (parameters.has('idExport')) {\n      fetchGoalConversion(parameters.get('idExport'))\n        .then((conversionExport) => {\n          this.conversionExport = conversionExport;\n        });\n    }\n  },\n  methods: {\n    constructBodySave() {\n      const body: SaveGoalConversion = {\n        name: this.conversionExport.name,\n        exportType: this.conversionExport.export_type,\n        description: this.conversionExport.description ? this.conversionExport.description.trim() : '',\n        method: 'GoalConversionExport.addGoalConversion',\n        goals: this.conversionExport.goals\n          .filter((g: GoalFromGoalConversion) => !!g.id_goal && !!g.revenu),\n        dayToExport: this.conversionExport.day_to_export,\n        idExport: null,\n        parameters: {},\n      };\n      if (this.conversionExport.id_export) {\n        body.idExport = this.conversionExport.id_export;\n        body.method = 'GoalConversionExport.updateGoalConversion';\n      }\n      if (this.conversionExport.export_type === 'facebook') {\n        body.parameters = this.conversionExport.parameters;\n      }\n      return body;\n    },\n    save() {\n      return AjaxHelper.post(\n        {},\n        this.constructBodySave(),\n        {\n          withTokenInUrl: true,\n        },\n      ).then(() => {\n        window.location.href = `${window.location.origin}${window.location.pathname}?module=GoalConversionExport&action=index&idSite=${Matomo.idSite}`;\n      }).catch((e) => ({\n        type: 'error',\n        message: e.message || e,\n      }));\n    },\n  },\n  computed: {\n    exportTypeOptions() {\n      return EXPORT_TYPE_OPTIONS;\n    },\n    revenueOptions() {\n      return REVENUE_OPTIONS;\n    },\n  },\n});\n","import { render } from \"./GoalConversionEdit.vue?vue&type=template&id=6e0b8b94\"\nimport script from \"./GoalConversionEdit.vue?vue&type=script&lang=ts\"\nexport * from \"./GoalConversionEdit.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { createAngularJsAdapter } from 'CoreHome';\nimport GoalConversionEdit from './GoalConversionEdit.vue';\n\nexport default createAngularJsAdapter({\n  component: GoalConversionEdit,\n  scope: {\n    exportTypes: {\n      angularJsBind: '=',\n    },\n    alreadyCreatedExportTypes: {\n      angularJsBind: '=',\n    },\n    clickIdProviders: {\n      angularJsBind: '=',\n    },\n    hasWriteAccess: {\n      angularJsBind: '=',\n    },\n  },\n  directiveName: 'goalConversionExportEdit',\n});\n","<!--\n  Matomo - free/libre analytics platform\n\n  @link https://matomo.org\n  @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n-->\n\n<template>\n  <ContentBlock\n  >\n    <div class=\"alert alert-info\">\n      Exports below are only available for <strong>{{ site }}</strong> website.\n    </div>\n    <table class=\"card card-table entityTable\">\n      <thead>\n      <tr>\n        <th>Name</th>\n        <th>Export type</th>\n        <th>Included Conversions</th>\n        <th>Last requested</th>\n        <th>Actions</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr v-for=\"goalConversion in goalConversions\"\n          :id=\"`export_${goalConversion.id_export}`\"\n          :key=\"goalConversion.id_export\">\n        <td>{{ goalConversion.name }}</td>\n        <td>{{ exportTypeOptions[goalConversion.export_type] }}</td>\n        <td>\n          <div v-for=\"goal in goalConversion.goals\"\n               :id=\"`goal_${goal.id_export}`\"\n               :key=\"goal.id_export\"\n               v-html=\"$sanitize(displayGoal(goal))\">\n          </div>\n        </td>\n        <td>{{ goalConversion.ts_requested }}</td>\n        <td>\n          <div style=\"display: flex;gap: 15px;justify-content: center;align-items: center\">\n            <a class=\"icon-download\" href=\"#\" style=\"text-decoration: none !important\"\n               title=\"Download\"\n               @click=\"openExport(goalConversion.access_token)\"/>\n            <a class=\"icon-export\" href=\"#\" style=\"text-decoration: none !important\"\n               title=\"Export URL\"\n               @click=\"generateExportUrl(goalConversion.access_token)\"/>\n            <a\n              :href=\"editGoalConversion(goalConversion.id_export)\"\n              class=\"icon-edit\"\n              style=\"text-decoration: none !important\"\n              title=\"Edit\"/>\n            <a class=\"icon-delete\" href=\"#\" style=\"text-decoration: none !important\"\n               title=\"Delete\"\n               @click=\"deleteConversion(goalConversion.id_export)\"/>\n          </div>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n    <SaveButton\n      class=\"createButton\"\n      tabindex=\"100\"\n      value=\"Create new conversion export\"\n      @confirm=\"save()\"\n    >\n    </SaveButton>\n    <div\n      id=\"confirmDeleteExport\"\n      ref=\"confirmDeleteExport\"\n      class=\"ui-confirm\"\n    >\n      <h2>Are you sure you want to delete this export? External services using this export URL as\n        data source will no longer be able to fetch any data.</h2>\n      <input\n        role=\"yes\"\n        type=\"button\"\n        value=\"Yes\"\n      />\n      <input\n        role=\"no\"\n        type=\"button\"\n        value=\"No\"\n      />\n    </div>\n    <div\n      id=\"showExportLink\"\n      ref=\"showExportLink\"\n      class=\"ui-confirm\"\n    >\n      <h2>Link to download this conversion export</h2>\n      <textarea\n        id=\"exportLink\"\n        :value=\"exportLink\"\n        onclick=\"this.select()\"\n        readonly\n      />\n      Be careful with whom you share this, as it will grant access to this conversion export without\n      any further authentication.\n      <input\n        role=\"yes\"\n        type=\"button\"\n        value=\"Close\"\n      />\n    </div>\n  </ContentBlock>\n</template>\n\n<style lang=\"less\" scoped>\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { SaveButton } from 'CorePluginsAdmin';\nimport { ContentBlock, Matomo, MatomoUrl } from 'CoreHome';\nimport { GoalConversion, GoalFromGoalConversion, KeyValue } from '../types';\nimport { deleteConversion, fetchGoalConversions, fetchGoals } from '../api';\n\ninterface TestPluginComponentState {\n  goalConversions: GoalConversion[];\n  goals: any;\n  exportLink: string;\n  site: string;\n}\n\nconst REVENUE_OPTIONS: KeyValue = {\n  goal: 'UseGoalRevenue',\n  custom: 'UseCustomRevenue',\n  null: 'UseEmptyRevenue',\n};\n\nconst EXPORT_TYPE_OPTIONS: KeyValue = {\n  google: 'Google',\n  facebook: 'Facebook',\n};\n\nexport default defineComponent({\n  components: {\n    ContentBlock,\n    SaveButton,\n  },\n  data(): TestPluginComponentState {\n    return {\n      site: Matomo.currentSiteName,\n      goals: {},\n      goalConversions: [] as GoalConversion[],\n      exportLink: '',\n    };\n  },\n  mounted() {\n    Promise.all([\n      fetchGoals(),\n      fetchGoalConversions(),\n    ])\n      .then(([goals, goalConversions]) => {\n        this.goals = goals;\n        this.goalConversions = goalConversions.sort(\n          (lhs, rhs) => parseInt(`${lhs.id_export}`, 10) - parseInt(`${rhs.id_export}`, 10),\n        );\n      });\n  },\n  methods: {\n    save() {\n      window.location.href = `${window.location.origin}${window.location.pathname}?module=GoalConversionExport&action=createOrEdit&idSite=${Matomo.idSite}`;\n    },\n    displayGoal(goal: GoalFromGoalConversion) {\n      const content = [this.goals[goal.id_goal]];\n      content.push('&#x279C;');\n      content.push(goal.export_name);\n      const revenuName = this.revenueOptions[goal.revenu];\n      if (revenuName) {\n        content.push(`(${revenuName})`);\n      }\n      return content.join(' ');\n    },\n    openExport(accessToken: string) {\n      window.open(this.getExportUrl(accessToken));\n    },\n    getExportUrl(accessToken: string) {\n      const params = MatomoUrl.stringify({\n        module: 'GoalConversionExport',\n        action: 'generateConversionExport',\n        accessToken,\n      });\n      return `${window.location.origin}${window.location.pathname}?${params}`;\n    },\n    generateExportUrl(accessToken: string) {\n      this.exportLink = this.getExportUrl(accessToken);\n      Matomo.helper.modalConfirm(this.$refs.showExportLink as HTMLElement);\n    },\n    deleteConversion(id_export: number) {\n      Matomo.helper.modalConfirm(this.$refs.confirmDeleteExport as HTMLElement, {\n        yes: () => {\n          deleteConversion(id_export)\n            .then(fetchGoalConversions)\n            .then((goalConversions) => {\n              this.goalConversions = goalConversions;\n            });\n        },\n      });\n    },\n    editGoalConversion(id_export: number) {\n      return `${window.location.origin}${window.location.pathname}?module=GoalConversionExport&action=createOrEdit&idSite=${Matomo.idSite}&idExport=${id_export}`;\n    },\n  },\n  computed: {\n    exportTypeOptions() {\n      return EXPORT_TYPE_OPTIONS;\n    },\n    revenueOptions() {\n      return REVENUE_OPTIONS;\n    },\n    siteId() {\n      return Matomo.idSite;\n    },\n  },\n});\n</script>\n","\nimport { defineComponent } from 'vue';\nimport { SaveButton } from 'CorePluginsAdmin';\nimport { ContentBlock, Matomo, MatomoUrl } from 'CoreHome';\nimport { GoalConversion, GoalFromGoalConversion, KeyValue } from '../types';\nimport { deleteConversion, fetchGoalConversions, fetchGoals } from '../api';\n\ninterface TestPluginComponentState {\n  goalConversions: GoalConversion[];\n  goals: any;\n  exportLink: string;\n  site: string;\n}\n\nconst REVENUE_OPTIONS: KeyValue = {\n  goal: 'UseGoalRevenue',\n  custom: 'UseCustomRevenue',\n  null: 'UseEmptyRevenue',\n};\n\nconst EXPORT_TYPE_OPTIONS: KeyValue = {\n  google: 'Google',\n  facebook: 'Facebook',\n};\n\nexport default defineComponent({\n  components: {\n    ContentBlock,\n    SaveButton,\n  },\n  data(): TestPluginComponentState {\n    return {\n      site: Matomo.currentSiteName,\n      goals: {},\n      goalConversions: [] as GoalConversion[],\n      exportLink: '',\n    };\n  },\n  mounted() {\n    Promise.all([\n      fetchGoals(),\n      fetchGoalConversions(),\n    ])\n      .then(([goals, goalConversions]) => {\n        this.goals = goals;\n        this.goalConversions = goalConversions.sort(\n          (lhs, rhs) => parseInt(`${lhs.id_export}`, 10) - parseInt(`${rhs.id_export}`, 10),\n        );\n      });\n  },\n  methods: {\n    save() {\n      window.location.href = `${window.location.origin}${window.location.pathname}?module=GoalConversionExport&action=createOrEdit&idSite=${Matomo.idSite}`;\n    },\n    displayGoal(goal: GoalFromGoalConversion) {\n      const content = [this.goals[goal.id_goal]];\n      content.push('&#x279C;');\n      content.push(goal.export_name);\n      const revenuName = this.revenueOptions[goal.revenu];\n      if (revenuName) {\n        content.push(`(${revenuName})`);\n      }\n      return content.join(' ');\n    },\n    openExport(accessToken: string) {\n      window.open(this.getExportUrl(accessToken));\n    },\n    getExportUrl(accessToken: string) {\n      const params = MatomoUrl.stringify({\n        module: 'GoalConversionExport',\n        action: 'generateConversionExport',\n        accessToken,\n      });\n      return `${window.location.origin}${window.location.pathname}?${params}`;\n    },\n    generateExportUrl(accessToken: string) {\n      this.exportLink = this.getExportUrl(accessToken);\n      Matomo.helper.modalConfirm(this.$refs.showExportLink as HTMLElement);\n    },\n    deleteConversion(id_export: number) {\n      Matomo.helper.modalConfirm(this.$refs.confirmDeleteExport as HTMLElement, {\n        yes: () => {\n          deleteConversion(id_export)\n            .then(fetchGoalConversions)\n            .then((goalConversions) => {\n              this.goalConversions = goalConversions;\n            });\n        },\n      });\n    },\n    editGoalConversion(id_export: number) {\n      return `${window.location.origin}${window.location.pathname}?module=GoalConversionExport&action=createOrEdit&idSite=${Matomo.idSite}&idExport=${id_export}`;\n    },\n  },\n  computed: {\n    exportTypeOptions() {\n      return EXPORT_TYPE_OPTIONS;\n    },\n    revenueOptions() {\n      return REVENUE_OPTIONS;\n    },\n    siteId() {\n      return Matomo.idSite;\n    },\n  },\n});\n","import { render } from \"./GoalConversionList.vue?vue&type=template&id=6edac63e\"\nimport script from \"./GoalConversionList.vue?vue&type=script&lang=ts\"\nexport * from \"./GoalConversionList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*!\n * Matomo - free/libre analytics platform\n *\n * @link https://matomo.org\n * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later\n */\n\nimport { createAngularJsAdapter } from 'CoreHome';\n\nimport GoalConversionList from './GoalConversionList.vue';\n\nexport default createAngularJsAdapter({\n  component: GoalConversionList,\n  scope: {\n    exportTypes: {\n      angularJsBind: '=',\n    },\n    alreadyCreatedExportTypes: {\n      angularJsBind: '=',\n    },\n    clickIdProviders: {\n      angularJsBind: '=',\n    },\n    hasWriteAccess: {\n      angularJsBind: '=',\n    },\n  },\n  directiveName: 'goalConversionExportEdit',\n});\n"],"sourceRoot":""}